---
import { getLangFromUrl, useTranslations } from "../i18n/utils";
import { Icon } from "astro-icon/components";
import "../styles/animations.css";
import "../styles/terminal.css";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<section id="home" class="animate-fade-in relative">
  <main
    class="container mx-auto px-4 w-full grid grid-cols-1 lg:grid-cols-2 gap-10"
  >
    <div
      class="animate-slide-in-left h-fit lg:min-h-screen mt-32 lg:mt-0 py-10 lg:py-0 content-center"
    >
      <h1
        class="text-7xl mb-6 font-sans animate-fade-in"
        style="--animation-delay: 200ms;"
      >
        {t("welcome.greeting")}
        <br />
        <span
          class="font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary-100 to-primary-200 animate-fade-in"
          style="--animation-delay: 400ms;"
        >
          Carlos Henrique
        </span>
      </h1>
      <p
        class="text-lg leading-relaxed text-gray-700 dark:text-gray-300 animate-fade-in"
        style="--animation-delay: 600ms;"
      >
        {t("welcome.description")}
      </p>

      <div
        class="mt-8 flex gap-6 animate-fade-in"
        style="--animation-delay: 800ms;"
      >
        <a
          href="https://github.com/carloshdrp"
          target="_blank"
          rel="noopener noreferrer"
          class="text-gray-700 dark:text-gray-300 dark:hover:text-primary-100 hover:text-primary-100 transition-all duration-300 hover:scale-110"
        >
          <Icon name="mdi:github" class="w-8 h-8" />
        </a>
        <a
          href="https://linkedin.com/in/carloshdrp"
          target="_blank"
          rel="noopener noreferrer"
          class="text-gray-700 dark:text-gray-300 dark:hover:text-primary-100 hover:text-primary-100 transition-all duration-300 hover:scale-110"
        >
          <Icon name="mdi:linkedin" class="w-8 h-8" />
        </a>
        <a
          href="https://instagram.com/carloshdrp"
          target="_blank"
          rel="noopener noreferrer"
          class="text-gray-700 dark:text-gray-300 dark:hover:text-primary-100 hover:text-primary-100 transition-all duration-300 hover:scale-110"
        >
          <Icon name="mdi:instagram" class="w-8 h-8" />
        </a>
      </div>
    </div>

    <div
      class="animate-slide-in-right h-fit lg:min-h-screen py-10 lg:py-0 content-center"
      style="--animation-delay: 400ms;"
    >
      <div
        class="relative backdrop-blur-md bg-white/40 dark:bg-gray-900/45 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700"
      >
        <div
          class="flex items-center gap-2 p-3 border-b border-gray-200 dark:border-gray-700"
        >
          <div class="relative">
            <div
              class="h-3 w-3 flex items-center justify-center rounded-full bg-red-500"
            >
              <div class="h-1 w-1 rounded-full bg-red-700"></div>
            </div>
          </div>
          <div class="relative">
            <div class="h-3 w-3 rounded-full bg-yellow-500"></div>
          </div>
          <div class="relative">
            <div class="h-3 w-3 rounded-full bg-green-500"></div>
          </div>
        </div>

        <div class="relative">
          <div
            class="px-4 py-2 font-mono text-sm text-gray-500 dark:text-gray-400 flex items-center"
          >
            <span class="text-green-500">~/carloshdrp</span>&nbsp;
            <div
              class="typing-command-wrapper opacity-0 inline-flex items-center"
            >
              <span class="typing-text">cat {t("welcome.terminal.file")}</span>
              <span class="command-cursor"></span>
            </div>
          </div>

          <pre
            class="px-6 overflow-x-auto code-content opacity-0">
    <code class="text-sm font-mono">
<span class="text-gray-500">{t('welcome.codeComment')}</span>

<span class="text-blue-500">const</span> <span class="text-yellow-500">developer</span> <span class="text-gray-400">=</span> <span class="text-purple-500">{`{`}</span>
  <span class="text-green-500">name</span><span class="text-gray-400">:</span> <span class="text-orange-500">"Carlos Henrique"</span><span class="text-gray-400">,</span>
  <span class="text-green-500">skills</span><span class="text-gray-400">:</span> <span class="text-purple-500">[</span>
    <span class="text-orange-500">"JavaScript/TypeScript"</span><span class="text-gray-400">,</span>
    <span class="text-orange-500">"React/Next.js"</span><span class="text-gray-400">,</span>
    <span class="text-orange-500">"Node.js"</span><span class="text-gray-400">,</span>
    <span class="text-orange-500">"Astro"</span>
  <span class="text-purple-500">]</span><span class="text-gray-400">,</span>
  <span class="text-green-500">passion</span><span class="text-gray-400">:</span> <span class="text-orange-500">"{t("welcome.passion")}"</span>
<span class="text-purple-500">}</span><span class="text-gray-400">;</span>

<span class="text-blue-500">print</span><span class="text-purple-500">(</span><span class="text-orange-500">"Hello World! ðŸ‘‹"</span><span class="text-purple-500">)</span><span class="text-gray-400">;</span>
            </code>
          </pre>

          <div
            class="absolute right-0 top-0 bottom-0 pb-1 w-2 bg-gray-200 dark:bg-gray-800 flex items-end"
          >
            <div class="w-full h-20 bg-gray-400 dark:bg-gray-600 rounded-full">
            </div>
          </div>

          <div
            class="px-4 py-2 font-mono text-sm text-gray-500 dark:text-gray-400 terminal-prompt opacity-0"
          >
            <span class="text-green-500">~/carloshdrp </span>
            <span class="ml-2 px-1 bg-white/80 cursor"></span>
          </div>
        </div>
      </div>
    </div>
  </main>
</section>

<script>
  import { setupAnimations } from "../utils/scrollAnimations";
  import { initializeTypingEffect } from "../utils/initializeTypingEffect";

  document.addEventListener("astro:page-load", () => {
    setupAnimations();
    initializeTypingEffect();
  });
</script>
